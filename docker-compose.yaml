# Docker Compose standalone deployment for Claude In A Box.
# Usage: docker compose up
# No Kubernetes required â€” runs the container directly with Docker.
#
# Authentication:
#   docker compose up
#   docker attach claude-agent
#   Run /login inside Claude Code to authenticate (credentials persist in volume).
services:
  claude-agent:
    build:
      context: .
      dockerfile: docker/Dockerfile
    image: claude-in-a-box:dev
    container_name: claude-agent
    environment:
      - CLAUDE_MODE=${CLAUDE_MODE:-interactive}
    volumes:
      - claude-data:/app/.claude
    stdin_open: true
    tty: true
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/usr/local/bin/healthcheck.sh"]
      interval: 30s
      timeout: 5s
      start_period: 15s
      retries: 3

volumes:
  claude-data:
