# Milestone v1.0: MVP

**Status:** ✅ SHIPPED 2026-02-25
**Phases:** 1-9
**Total Plans:** 17

## Overview

Claude In A Box delivers a containerized Claude Code deployment image with a curated DevOps toolkit, Kubernetes manifests, and Helm chart for production cluster debugging via Remote Control. Nine phases delivered 26 requirements from image build to public release, plus tech debt cleanup from milestone audit.

## Phases

### Phase 1: Container Foundation

**Goal**: A reproducible Docker image that builds under 2GB, runs Claude Code as non-root, and contains all 30+ debugging tools verified at runtime
**Depends on**: Nothing (first phase)
**Plans**: 2 plans

Plans:
- [x] 01-01: Multi-stage Dockerfile, .dockerignore, and verify-tools.sh
- [x] 01-02: Build image, verify all success criteria, fix issues

**Details:**
Requirements: IMG-01, IMG-02, IMG-03, IMG-04, IMG-05
Success Criteria: Image under 2GB, non-root UID 10000, tini PID 1, 30+ tools verified, pinned versions throughout.

### Phase 2: Entrypoint & Authentication

**Goal**: Container starts correctly in all three modes, handles signals for graceful shutdown, authenticates via token or interactive flow, and reports health to orchestrators
**Depends on**: Phase 1
**Plans**: 2 plans

Plans:
- [x] 02-01: Create entrypoint, health probe scripts, and update Dockerfile
- [x] 02-02: Build image, verify all Phase 2 success criteria, fix issues

**Details:**
Requirements: ENT-01, ENT-02, ENT-03, ENT-04, ENT-05
Success Criteria: 3-mode dispatch, SIGTERM handling, OAuth token auth, exec-based probes, human-readable auth errors.

### Phase 3: Local Development Environment

**Goal**: One-command local Kubernetes environment where the Claude-in-a-box image deploys, runs, and is accessible for development and testing
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:
- [x] 03-01: KIND cluster config, dev pod manifest, and Makefile (DEV-01, DEV-02, DEV-03)
- [x] 03-02: Docker Compose standalone deployment file (DEV-05)

**Details:**
Requirements: DEV-01, DEV-02, DEV-03, DEV-05
Success Criteria: `make bootstrap` end-to-end, idempotent teardown/recreate, `make redeploy`, Docker Compose standalone.

### Phase 4: Kubernetes Manifests & RBAC

**Goal**: Complete raw Kubernetes manifest set that deploys Claude-in-a-box with correct RBAC, network isolation, and persistence into any cluster via kubectl apply
**Depends on**: Phase 3
**Plans**: 2 plans

Plans:
- [x] 04-01: Base K8s manifests: ServiceAccount, RBAC reader, NetworkPolicy, StatefulSet with PVC (K8S-01, K8S-02, K8S-03, K8S-04)
- [x] 04-02: Operator RBAC overlay and Makefile integration (K8S-05)

**Details:**
Requirements: K8S-01, K8S-02, K8S-03, K8S-04, K8S-05
Success Criteria: StatefulSet with stable pod identity, read-only RBAC (14 resources), egress-only NetworkPolicy, PVC persistence, operator-tier opt-in.

### Phase 5: Integration Testing

**Goal**: Automated test suite that validates the complete system works end-to-end in a KIND cluster before any code is shipped
**Depends on**: Phase 4
**Plans**: 2 plans

Plans:
- [x] 05-01: Test infrastructure: KIND test cluster config, Calico CNI install, BATS setup, test helpers, Makefile targets
- [x] 05-02: Test suite: RBAC, networking, tools, persistence, and Remote Control BATS test files

**Details:**
Requirements: DEV-04
Success Criteria: `make test` full suite, RBAC tests (22 individual), networking tests, persistence tests, tool verification tests.

### Phase 6: Intelligence Layer

**Goal**: Claude Code running inside the cluster has structured Kubernetes API access via MCP and pre-built skills for common DevOps tasks, with auto-populated cluster context
**Depends on**: Phase 4
**Plans**: 2 plans

Plans:
- [x] 06-01: MCP config, DevOps skills library, and Dockerfile updates (INT-01, INT-02)
- [x] 06-02: CLAUDE.md generation script and entrypoint wiring (DOC-02)

**Details:**
Requirements: INT-01, INT-02, DOC-02
Success Criteria: MCP kubernetes queries, 4 DevOps skills available, CLAUDE.md auto-populated at startup.

### Phase 7: Production Packaging

**Goal**: Helm chart enables parameterized deployment into any production cluster, and CI/CD pipeline ensures every image is scanned and traceable
**Depends on**: Phase 5, Phase 6
**Plans**: 2 plans

Plans:
- [x] 07-01: Helm chart with templates, security profile values files, and golden file tests (K8S-06)
- [x] 07-02: CI pipeline with Docker build, Trivy scan, SBOM generation, and Helm validation (IMG-06)

**Details:**
Requirements: K8S-06, IMG-06
Success Criteria: `helm install` works, 3 security profiles, CI with Trivy + SBOM, Helm template matches raw manifests.

### Phase 8: Documentation & Release

**Goal**: A new user can go from zero to running Claude-in-a-box in their cluster by following the README alone
**Depends on**: Phase 7
**Plans**: 1 plan

Plans:
- [x] 08-01: Comprehensive README.md with quickstart, architecture diagram, deployment methods, and troubleshooting (DOC-01)

**Details:**
Requirements: DOC-01
Success Criteria: Quickstart under 10 minutes, Mermaid architecture diagram, 3 deployment methods documented, top 5 failure mode troubleshooting.

### Phase 9: Tech Debt Cleanup

**Goal**: Close all tech debt items from v1.0 audit — fix build context bloat, wire readiness probe, add integration tests to CI, fix test cluster isolation, and correct README documentation
**Depends on**: Phase 8
**Plans**: 2 plans

Plans:
- [x] 09-01: Fix .dockerignore, wire readiness probe, correct README label, update REQUIREMENTS.md checkboxes
- [x] 09-02: Fix test cluster name collision and add BATS integration tests to CI

**Details:**
Gap Closure: 5 tech debt items + 1 integration gap from v1.0-MILESTONE-AUDIT.md
Success Criteria: Root .dockerignore, readiness.sh wired, BATS in CI, test cluster isolation, README label fix.

---

## Milestone Summary

**Key Decisions:**
- Ubuntu 24.04 LTS base (good apt ecosystem, 1.42GB result)
- Full debugging toolkit without trimming (completeness over size)
- KIND for local dev/testing (production-fidelity without cloud costs)
- Exec probes over HTTP health server (no orphaned processes)
- Skills staged to /opt/claude-skills/ (survives PVC overlay)
- Calico CNI for test cluster (real NetworkPolicy enforcement)
- Separate test cluster name (claude-in-a-box-test for isolation)

**Issues Resolved:**
- docker/.dockerignore mislocated (moved to repo root)
- readiness.sh orphaned (wired into all manifests and Helm templates)
- BATS tests not in CI (added parallel CI job with KIND + Calico)
- KIND cluster name collision (test cluster renamed)
- README Helm label mismatch (corrected to app=claude-in-a-box)
- REQUIREMENTS.md checkbox discrepancy (5 requirements updated)

**Issues Deferred:**
- OAuth persistence upstream issues (anthropics/claude-code#22066, #12447, #21765) — monitor upstream
- Runtime verification of KIND bootstrap and Docker Compose flows (human_needed status)

**Technical Debt Incurred:**
- None remaining — Phase 9 closed all identified tech debt from audit

---

_For current project status, see .planning/PROJECT.md_
