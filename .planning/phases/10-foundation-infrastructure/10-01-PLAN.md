---
phase: 10-foundation-infrastructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - site/package.json
  - site/package-lock.json
  - site/astro.config.mjs
  - site/tsconfig.json
  - site/src/styles/global.css
  - site/src/layouts/BaseLayout.astro
  - site/src/pages/index.astro
autonomous: true

must_haves:
  truths:
    - "Running `npm run build` in site/ produces a working static site with zero errors"
    - "The site uses Inter for body text and JetBrains Mono for monospace elements"
    - "The site displays a dark-themed placeholder page with defined color tokens visible"
    - "Tailwind utility classes generated from @theme tokens (e.g., bg-bg-primary, text-accent) work correctly"
  artifacts:
    - path: "site/package.json"
      provides: "Astro project manifest with all dependencies"
      contains: "astro"
    - path: "site/package-lock.json"
      provides: "Lockfile for CI reproducibility"
    - path: "site/astro.config.mjs"
      provides: "Astro config with Tailwind vite plugin and custom domain site URL"
      contains: "tailwindcss"
    - path: "site/src/styles/global.css"
      provides: "Design system: Tailwind import, font imports, @theme tokens"
      contains: "@theme"
    - path: "site/src/layouts/BaseLayout.astro"
      provides: "HTML shell with meta tags, font loading, global styles"
      contains: "global.css"
    - path: "site/src/pages/index.astro"
      provides: "Placeholder landing page using design system tokens"
      contains: "BaseLayout"
  key_links:
    - from: "site/astro.config.mjs"
      to: "@tailwindcss/vite"
      via: "vite plugins array"
      pattern: "tailwindcss\\(\\)"
    - from: "site/src/styles/global.css"
      to: "tailwindcss"
      via: "@import directive"
      pattern: '@import "tailwindcss"'
    - from: "site/src/layouts/BaseLayout.astro"
      to: "site/src/styles/global.css"
      via: "CSS import in frontmatter"
      pattern: 'import.*global\\.css'
    - from: "site/src/pages/index.astro"
      to: "site/src/layouts/BaseLayout.astro"
      via: "layout component import"
      pattern: "import BaseLayout"
---

<objective>
Scaffold the Astro project in site/ with Tailwind CSS v4 and create a dark theme design system with placeholder page.

Purpose: Establish the site foundation so that `npm run build` produces a working static site and all design tokens are defined for Phase 11 component development.
Output: A buildable Astro project with Inter + JetBrains Mono fonts, dark color palette, and a placeholder landing page demonstrating the design system.
</objective>

<execution_context>
@/Users/patrykattc/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrykattc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-foundation-infrastructure/10-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Astro project with Tailwind CSS v4</name>
  <files>
    site/package.json
    site/package-lock.json
    site/astro.config.mjs
    site/tsconfig.json
  </files>
  <action>
    1. Create the site/ directory at the repo root.

    2. Scaffold the Astro project using the minimal template:
       ```bash
       cd site/
       npm create astro@latest . -- --template minimal --no-install --skip-houston
       ```
       If the CLI prompts for TypeScript, select "strict". If it creates a git repo, that's fine (it's inside the parent git repo).

    3. Install dependencies:
       ```bash
       cd site/
       npm install
       npm install tailwindcss @tailwindcss/vite
       npm install @fontsource-variable/inter @fontsource-variable/jetbrains-mono
       ```

    4. Configure Astro with Tailwind v4 vite plugin. Replace `site/astro.config.mjs` with:
       ```javascript
       import { defineConfig } from "astro/config";
       import tailwindcss from "@tailwindcss/vite";

       export default defineConfig({
         site: "https://remotekube.patrykgolabek.dev",
         vite: {
           plugins: [tailwindcss()],
         },
       });
       ```
       IMPORTANT: Do NOT set `base`. Custom domain serves from root.
       IMPORTANT: Do NOT use `@astrojs/tailwind` -- it is deprecated for Tailwind v4.
       IMPORTANT: Do NOT create a `tailwind.config.js` -- Tailwind v4 uses CSS-first config via @theme.

    5. Verify the scaffold by running `npm run build` in site/. It must complete with zero errors.

    6. Ensure `site/package-lock.json` exists (it must be committed for CI lockfile detection by withastro/action).
  </action>
  <verify>
    ```bash
    cd site/ && npm run build
    ```
    Build completes with exit code 0. The `site/dist/` directory is created with HTML output.
    Confirm `site/package-lock.json` exists.
  </verify>
  <done>Astro project scaffolded in site/ with Tailwind CSS v4 via @tailwindcss/vite, Inter and JetBrains Mono fonts installed, `npm run build` passes with zero errors, package-lock.json exists.</done>
</task>

<task type="auto">
  <name>Task 2: Create dark theme design system and placeholder page</name>
  <files>
    site/src/styles/global.css
    site/src/layouts/BaseLayout.astro
    site/src/pages/index.astro
  </files>
  <action>
    1. Create `site/src/styles/global.css` with the full design system:
       ```css
       @import "tailwindcss";

       /* Self-hosted fonts */
       @import "@fontsource-variable/inter";
       @import "@fontsource-variable/jetbrains-mono";

       @theme {
         /* Typography */
         --font-sans: "Inter Variable", "Inter", system-ui, sans-serif;
         --font-mono: "JetBrains Mono Variable", "JetBrains Mono", ui-monospace, monospace;

         /* Dark theme color palette (dark-first, no dark: prefix needed) */
         --color-bg-primary: oklch(0.15 0.01 260);
         --color-bg-secondary: oklch(0.20 0.01 260);
         --color-bg-tertiary: oklch(0.25 0.02 260);
         --color-text-primary: oklch(0.95 0.01 260);
         --color-text-secondary: oklch(0.75 0.02 260);
         --color-text-muted: oklch(0.55 0.02 260);
         --color-accent: oklch(0.70 0.15 250);
         --color-accent-hover: oklch(0.75 0.17 250);
         --color-border: oklch(0.30 0.02 260);

         /* Spacing base (Tailwind v4 multiplier) */
         --spacing: 0.25rem;
       }
       ```
       These @theme variables automatically generate Tailwind utility classes: `bg-bg-primary`, `text-text-primary`, `text-accent`, `border-border`, etc.

    2. Create `site/src/layouts/BaseLayout.astro`:
       ```astro
       ---
       import "../styles/global.css";

       interface Props {
         title: string;
         description?: string;
       }

       const { title, description = "Deploy Claude Code inside your Kubernetes cluster" } = Astro.props;
       ---

       <!doctype html>
       <html lang="en">
         <head>
           <meta charset="utf-8" />
           <meta name="viewport" content="width=device-width, initial-scale=1" />
           <meta name="description" content={description} />
           <title>{title}</title>
         </head>
         <body class="bg-bg-primary text-text-primary font-sans antialiased">
           <slot />
         </body>
       </html>
       ```

    3. Replace `site/src/pages/index.astro` with a placeholder page that demonstrates ALL design tokens:
       ```astro
       ---
       import BaseLayout from "../layouts/BaseLayout.astro";
       ---

       <BaseLayout title="RemoteKube - Claude Code in Your Cluster">
         <main class="min-h-screen flex items-center justify-center">
           <div class="text-center space-y-6 p-8">
             <h1 class="text-5xl font-bold text-text-primary tracking-tight">
               RemoteKube
             </h1>
             <p class="text-xl text-text-secondary font-mono">
               Deploy once, control from anywhere
             </p>
             <p class="text-text-muted text-sm">
               Coming soon
             </p>
             <div class="mt-8 inline-block px-6 py-3 bg-accent text-bg-primary font-semibold rounded-lg">
               Design System Active
             </div>
           </div>
         </main>
       </BaseLayout>
       ```
       This placeholder uses: bg-bg-primary (body), text-text-primary (heading), text-text-secondary (tagline), text-text-muted (coming soon), bg-accent (button), font-sans (body), font-mono (tagline) -- exercising the full design token set.

    4. Delete any default pages or components created by the minimal template that are not needed (e.g., if the template created a default `index.astro` with sample content, it was replaced in step 3).

    5. Run `npm run build` in site/ to verify everything compiles correctly with the design system.

    6. Run `npm run dev` briefly (start it, confirm no errors in console, then kill it) to verify the dev server works.
  </action>
  <verify>
    ```bash
    cd site/ && npm run build
    ```
    Build completes with exit code 0. Check that `site/dist/index.html` contains:
    - The Inter font reference (font-family includes "Inter Variable")
    - The design token CSS custom properties (oklch values)
    - The placeholder content ("RemoteKube", "Deploy once, control from anywhere")
  </verify>
  <done>Dark theme design system defined in global.css with @theme tokens (3 backgrounds, 3 text levels, accent, border), Inter + JetBrains Mono fonts loaded via Fontsource, BaseLayout wrapping all pages, placeholder index page visually demonstrating all design tokens, build passes cleanly.</done>
</task>

</tasks>

<verification>
1. `cd site/ && npm run build` exits 0 with no warnings or errors
2. `site/dist/index.html` exists and contains rendered HTML
3. `site/package.json` lists astro, tailwindcss, @tailwindcss/vite, @fontsource-variable/inter, @fontsource-variable/jetbrains-mono as dependencies
4. `site/astro.config.mjs` uses `@tailwindcss/vite` plugin (NOT @astrojs/tailwind)
5. `site/src/styles/global.css` contains `@theme` block with color, font, and spacing tokens
6. No `tailwind.config.js` or `tailwind.config.mjs` exists in site/
7. `site/package-lock.json` exists
</verification>

<success_criteria>
- `npm run build` in site/ completes with zero errors
- The built HTML contains design system CSS (oklch color values, Inter/JetBrains Mono font stacks)
- Placeholder page text ("RemoteKube", "Deploy once, control from anywhere") is visible in built output
- No deprecated integrations used (@astrojs/tailwind, tailwind.config.js)
</success_criteria>

<output>
After completion, create `.planning/phases/10-foundation-infrastructure/10-01-SUMMARY.md`
</output>
