---
phase: 08-documentation-release
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [README.md]
autonomous: false
requirements: [DOC-01]

must_haves:
  truths:
    - "New user finds quickstart instructions within 30 seconds of opening README"
    - "New user understands the three-layer architecture from the Mermaid diagram"
    - "New user can deploy via KIND, Docker Compose, or Helm using copy-pasteable commands"
    - "New user can diagnose authentication, networking, image staleness, signal, and RBAC failures from troubleshooting section"
  artifacts:
    - path: "README.md"
      provides: "Comprehensive project documentation with quickstart, architecture, deployment methods, and troubleshooting"
      min_lines: 300
      contains: "make bootstrap"
  key_links:
    - from: "README.md quickstart section"
      to: "Makefile bootstrap target"
      via: "documented make bootstrap command"
      pattern: "make bootstrap"
    - from: "README.md Docker Compose section"
      to: "docker-compose.yaml"
      via: "documented docker compose up command"
      pattern: "docker compose up"
    - from: "README.md Helm section"
      to: "helm/claude-in-a-box/"
      via: "documented helm install command"
      pattern: "helm install"
    - from: "README.md architecture diagram"
      to: "system components"
      via: "Mermaid flowchart TD with subgraphs"
      pattern: "flowchart TD"
---

<objective>
Write the comprehensive README.md for Claude In A Box that enables a Kubernetes-literate user to go from zero to a running deployment in under 10 minutes.

Purpose: This is the final phase of the project. All code is complete across phases 1-7. The README is the public face of the project -- it determines whether a new user succeeds or abandons the tool.

Output: A single README.md replacing the current placeholder, covering architecture, three deployment methods, authentication, RBAC, and troubleshooting.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-documentation-release/08-RESEARCH.md

# Source files the README documents (read these to extract accurate commands/config)
@Makefile
@docker-compose.yaml
@helm/claude-in-a-box/Chart.yaml
@helm/claude-in-a-box/values.yaml
@helm/claude-in-a-box/values-operator.yaml
@helm/claude-in-a-box/values-readonly.yaml
@helm/claude-in-a-box/values-airgapped.yaml
@scripts/entrypoint.sh
@scripts/verify-tools.sh
@.mcp.json
@k8s/base/02-rbac-reader.yaml
@k8s/overlays/rbac-operator.yaml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write comprehensive README.md</name>
  <files>README.md</files>
  <action>
Replace the current single-line README.md placeholder with a comprehensive project README following this exact section order (from 08-RESEARCH.md):

1. **Title + badges + one-liner description**
   - Title: "Claude In A Box"
   - Badges: MIT license badge, CI workflow badge (use `PatrykQuantumNomad/claude-in-a-box` as the GitHub owner/repo)
   - One-liner: "Deploy once, control from anywhere -- an AI-powered DevOps agent running inside your Kubernetes cluster, accessible from your phone via Remote Control."

2. **Architecture diagram**
   - Use Mermaid `flowchart TD` with subgraphs (NOT architecture-beta -- it has rendering issues on GitHub per mermaid-js/mermaid#6024)
   - Three layers: User Access (Phone, Web), Anthropic Cloud (API, Remote Control), Kubernetes Cluster (Pod with Claude Code + MCP + Skills + Tools, ServiceAccount, NetworkPolicy, PVC)
   - Use the diagram structure from 08-RESEARCH.md as a starting point but refine for clarity

3. **Features / What's included**
   - Collapsible tool list using HTML details/summary tags (32+ tools across 8 categories)
   - Extract tool categories from scripts/verify-tools.sh
   - Key features: Remote Control access, MCP Kubernetes integration, 3 startup modes, tiered RBAC, NetworkPolicy isolation, PVC persistence

4. **Prerequisites**
   - Docker (required for all methods)
   - KIND + kubectl (for local dev)
   - Docker Compose v2 (for standalone)
   - Helm 3+ + kubectl (for production)
   - Anthropic Pro or Max subscription (for Remote Control mode)

5. **Quickstart (KIND -- fastest path)**
   - Extract exact commands from Makefile: `git clone`, `cd`, `make bootstrap`
   - Verification: `kubectl get pods -l app=claude-agent`
   - Next step: authenticate (set CLAUDE_CODE_OAUTH_TOKEN or kubectl exec for interactive login)
   - Teardown: `make teardown`
   - Use the GitHub clone URL: `https://github.com/PatrykQuantumNomad/claude-in-a-box.git`

6. **Deployment Methods** (three subsections)
   Each method follows the pattern: when to use, prerequisites, commands, verification, teardown.

   a. **KIND local development**: `make bootstrap`, `make redeploy`, `make teardown`, `make status`
   b. **Docker Compose standalone**: Set auth env vars, `docker compose up -d`, `docker attach claude-agent`, `docker compose down`
   c. **Helm production**: `helm install claude-agent ./helm/claude-in-a-box` with three security profiles (readonly default, operator, airgapped). Include `--set image.repository` and `--set image.tag` examples using `ghcr.io/PatrykQuantumNomad/claude-in-a-box`.

7. **Configuration reference**
   - Key environment variables table: CLAUDE_MODE, CLAUDE_CODE_OAUTH_TOKEN, ANTHROPIC_API_KEY, CLAUDE_PROMPT (headless mode)
   - Three startup modes table: interactive (default), remote-control, headless

8. **Authentication**
   - Four methods table: OAuth token, API key, interactive login, mounted credentials
   - OAuth token is from `claude setup-token` on local machine
   - Note: Remote Control requires Pro/Max subscription and OAuth token (not API key)

9. **RBAC tiers**
   - Three-tier table: Readonly (default, 14 resource types), Operator (+ mutations), Airgapped (readonly + restricted egress)
   - How to apply operator tier: Makefile target or Helm values file
   - Extract actual resource types from k8s/base/02-rbac-reader.yaml

10. **Troubleshooting**
    - Top 5 failure modes from 08-RESEARCH.md, each with Symptom / Cause / Fix structure:
      1. Authentication Failure
      2. NetworkPolicy Blocking Egress
      3. Image Staleness After Rebuild
      4. Signal Handling / Graceful Shutdown
      5. RBAC Permission Denied

11. **Development / Contributing**
    - Makefile targets table (bootstrap, teardown, redeploy, build, test-setup, test, test-teardown, deploy-operator, status, help)
    - Integration test suite: `make test-setup && make test && make test-teardown`
    - CI pipeline: GitHub Actions with Docker build, Trivy scan, SBOM, Helm lint

12. **License**
    - MIT -- link to LICENSE file

IMPORTANT GUIDELINES:
- Every command must be extracted from actual project files (Makefile, docker-compose.yaml, Helm chart). Do NOT invent commands.
- Use GitHub Flavored Markdown only -- no custom HTML beyond details/summary tags.
- No emojis anywhere in the README.
- Keep the README scannable: use tables, code blocks, and short paragraphs.
- Link to Anthropic's Remote Control documentation rather than duplicating their docs.
- Use `PatrykQuantumNomad/claude-in-a-box` as the GitHub owner/repo (from git remote).
  </action>
  <verify>
    <automated>
    # Verify README exists, has substantial content, and contains key sections
    test -f README.md && \
    test $(wc -l < README.md) -gt 300 && \
    grep -q "make bootstrap" README.md && \
    grep -q "docker compose" README.md && \
    grep -q "helm install" README.md && \
    grep -q "flowchart TD" README.md && \
    grep -q "Troubleshooting" README.md && \
    grep -q "Authentication" README.md && \
    grep -q "RBAC" README.md && \
    echo "PASS: README.md has all required sections" || echo "FAIL: README.md missing required content"
    </automated>
  </verify>
  <done>
    README.md contains all 12 sections with accurate commands extracted from project files. Mermaid diagram uses flowchart TD syntax. All three deployment methods documented with working commands. Top 5 troubleshooting entries present with Symptom/Cause/Fix structure. File exceeds 300 lines.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify README rendering and accuracy</name>
  <files>README.md</files>
  <action>
Human verifies the README.md renders correctly on GitHub and contains accurate, working commands. This is a visual and content accuracy check that cannot be automated.
  </action>
  <verify>
    <automated>echo "Checkpoint: human verification required -- see how-to-verify steps below"</automated>
  </verify>
  <done>Human confirms README renders correctly on GitHub with working Mermaid diagram, accurate commands, and proper formatting.</done>
  <what-built>Comprehensive README.md replacing the placeholder, covering architecture diagram, quickstart, three deployment methods, authentication, RBAC tiers, and troubleshooting for the top 5 failure modes.</what-built>
  <how-to-verify>
    1. Open README.md in GitHub (push to branch or use `gh repo view --web`) to verify Mermaid diagram renders correctly
    2. Verify the architecture diagram shows three layers (User Access, Anthropic Cloud, Kubernetes Cluster) with proper connections
    3. Spot-check quickstart commands match Makefile: `make bootstrap` should create KIND cluster + build + load + deploy
    4. Verify Docker Compose commands match docker-compose.yaml (service name, env vars)
    5. Verify Helm commands reference correct chart path (helm/claude-in-a-box/) and security profile files
    6. Check troubleshooting entries are actionable (each has Symptom, Cause, Fix)
    7. Confirm no broken markdown formatting (tables render, code blocks highlighted, collapsible sections work)
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 8, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Phase 8 success criteria verification:

1. README contains quickstart instructions deployable in under 10 minutes:
   - `grep -c "make bootstrap" README.md` returns at least 1
   - Quickstart section appears before deployment methods

2. Architecture diagram showing three-layer system:
   - `grep -c "flowchart TD" README.md` returns 1
   - `grep -c "subgraph" README.md` returns at least 3

3. All three deployment methods documented:
   - KIND: `grep "make bootstrap" README.md`
   - Compose: `grep "docker compose" README.md`
   - Helm: `grep "helm install" README.md`

4. Top 5 troubleshooting entries present:
   - `grep -c "Authentication Failure\|NetworkPolicy\|Image Staleness\|Signal Handling\|RBAC Permission" README.md` returns 5
</verification>

<success_criteria>
- README.md exceeds 300 lines with all 12 sections
- Mermaid architecture diagram renders on GitHub
- All commands are accurate (extracted from Makefile, docker-compose.yaml, Helm chart)
- New user can follow quickstart from clone to running pod
- Troubleshooting covers all 5 failure modes with actionable fixes
- Human verification confirms rendering and accuracy
</success_criteria>

<output>
After completion, create `.planning/phases/08-documentation-release/08-01-SUMMARY.md`
</output>
