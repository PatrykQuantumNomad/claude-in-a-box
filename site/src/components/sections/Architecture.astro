<section class="py-16 md:py-20 lg:py-24 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <h2 class="text-3xl md:text-4xl font-bold text-text-primary text-center mb-4">
      How It Works
    </h2>
    <p class="text-text-secondary text-center mb-12">
      Phone to cluster in milliseconds
    </p>
    <div class="max-w-4xl mx-auto">
      <svg
        viewBox="0 0 800 300"
        class="w-full h-auto"
        role="img"
        aria-label="Architecture diagram showing phone connecting to Anthropic API relay, then to Claude Code CLI running inside a Kubernetes cluster"
      >
        <defs>
          <marker
            id="arrowhead"
            markerWidth="10"
            markerHeight="7"
            refX="10"
            refY="3.5"
            orient="auto"
          >
            <polygon
              points="0 0, 10 3.5, 0 7"
              style="fill: oklch(0.70 0.15 250)"
            />
          </marker>
        </defs>

        <!-- Node 1: Phone / claude.ai -->
        <rect
          x="20" y="70" width="120" height="80" rx="8"
          style="fill: oklch(0.20 0.01 260); stroke: oklch(0.30 0.02 260); stroke-width: 1.5"
        />
        <text x="80" y="102" text-anchor="middle" style="fill: oklch(0.95 0.01 260); font-size: 14px; font-weight: 600">
          Phone
        </text>
        <text x="80" y="122" text-anchor="middle" style="fill: oklch(0.55 0.02 260); font-size: 11px">
          claude.ai
        </text>

        <!-- Arrow 1->2 -->
        <line
          x1="140" y1="110" x2="175" y2="110"
          style="stroke: oklch(0.70 0.15 250); stroke-width: 2"
          marker-end="url(#arrowhead)"
        />

        <!-- Node 2: Anthropic API -->
        <rect
          x="185" y="70" width="120" height="80" rx="8"
          style="fill: oklch(0.20 0.01 260); stroke: oklch(0.30 0.02 260); stroke-width: 1.5"
        />
        <text x="245" y="102" text-anchor="middle" style="fill: oklch(0.95 0.01 260); font-size: 14px; font-weight: 600">
          Anthropic
        </text>
        <text x="245" y="122" text-anchor="middle" style="fill: oklch(0.55 0.02 260); font-size: 11px">
          API Relay
        </text>

        <!-- Arrow 2->3 -->
        <line
          x1="305" y1="110" x2="340" y2="110"
          style="stroke: oklch(0.70 0.15 250); stroke-width: 2"
          marker-end="url(#arrowhead)"
        />

        <!-- Node 3: Claude Code -->
        <rect
          x="350" y="70" width="120" height="80" rx="8"
          style="fill: oklch(0.20 0.01 260); stroke: oklch(0.30 0.02 260); stroke-width: 1.5"
        />
        <text x="410" y="102" text-anchor="middle" style="fill: oklch(0.95 0.01 260); font-size: 14px; font-weight: 600">
          Claude Code
        </text>
        <text x="410" y="122" text-anchor="middle" style="fill: oklch(0.55 0.02 260); font-size: 11px">
          In-Cluster Pod
        </text>

        <!-- Arrow 3->4 -->
        <line
          x1="470" y1="110" x2="505" y2="110"
          style="stroke: oklch(0.70 0.15 250); stroke-width: 2"
          marker-end="url(#arrowhead)"
        />

        <!-- Node 4: MCP Server -->
        <rect
          x="515" y="70" width="120" height="80" rx="8"
          style="fill: oklch(0.20 0.01 260); stroke: oklch(0.30 0.02 260); stroke-width: 1.5"
        />
        <text x="575" y="102" text-anchor="middle" style="fill: oklch(0.95 0.01 260); font-size: 14px; font-weight: 600">
          MCP Server
        </text>
        <text x="575" y="122" text-anchor="middle" style="fill: oklch(0.55 0.02 260); font-size: 11px">
          K8s Sidecar
        </text>

        <!-- Arrow 4->5 -->
        <line
          x1="635" y1="110" x2="670" y2="110"
          style="stroke: oklch(0.70 0.15 250); stroke-width: 2"
          marker-end="url(#arrowhead)"
        />

        <!-- Node 5: K8s Cluster -->
        <rect
          x="680" y="70" width="100" height="80" rx="8"
          style="fill: oklch(0.20 0.01 260); stroke: oklch(0.30 0.02 260); stroke-width: 1.5"
        />
        <text x="730" y="102" text-anchor="middle" style="fill: oklch(0.95 0.01 260); font-size: 14px; font-weight: 600">
          K8s Cluster
        </text>
        <text x="730" y="122" text-anchor="middle" style="fill: oklch(0.55 0.02 260); font-size: 11px">
          Resources
        </text>

        <!-- Infrastructure pills row -->
        <rect
          x="160" y="220" width="130" height="32" rx="16"
          style="fill: oklch(0.18 0.01 260); stroke: oklch(0.28 0.02 260); stroke-width: 1"
        />
        <text x="225" y="241" text-anchor="middle" style="fill: oklch(0.55 0.02 260); font-size: 11px">
          ServiceAccount
        </text>

        <rect
          x="330" y="220" width="130" height="32" rx="16"
          style="fill: oklch(0.18 0.01 260); stroke: oklch(0.28 0.02 260); stroke-width: 1"
        />
        <text x="395" y="241" text-anchor="middle" style="fill: oklch(0.55 0.02 260); font-size: 11px">
          NetworkPolicy
        </text>

        <rect
          x="500" y="220" width="140" height="32" rx="16"
          style="fill: oklch(0.18 0.01 260); stroke: oklch(0.28 0.02 260); stroke-width: 1"
        />
        <text x="570" y="241" text-anchor="middle" style="fill: oklch(0.55 0.02 260); font-size: 11px">
          PersistentVolume
        </text>

        <!-- Dotted lines from main flow to infra pills -->
        <line
          x1="410" y1="150" x2="410" y2="210"
          style="stroke: oklch(0.30 0.02 260); stroke-width: 1; stroke-dasharray: 4 3"
        />
      </svg>
    </div>
  </div>
</section>
